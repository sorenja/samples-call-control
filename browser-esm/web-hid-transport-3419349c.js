import{b as e,T as t,t as s,J as i,E as n,l as r,L as d}from"./index-83c67256.js";class o{constructor(s,i,n){this.webHidHandler=s,this.logger=i,this.recorder=n,this.events=new e,this.consoleAppEvent=this.events,this.webHidConnected=!1,this.context=t.WEB_HID}connect(){const t=new e;return this.webHidConnected?s(new i("Already connected",n.UNEXPECTED_ERROR)):(this.webHidHandler.events.subscribe(e=>{var t;let s=e;this.recorder&&(s=null===(t=this.recorder)||void 0===t?void 0:t.recordInput(s)),this.events.next(s)}),this.webHidHandler.start(),this.webHidConnected=!0,t.complete(),t)}writeAction(e){var t;if(!this.webHidConnected){const e="WebHID is uninitialized.";throw r(e,this.logger,d.ERROR),new i(e,n.INIT_ERROR)}null===(t=this.recorder)||void 0===t||t.recordOutput(e),this.webHidHandler.sendMessage(e)}}export{o as WebHidTransport};
